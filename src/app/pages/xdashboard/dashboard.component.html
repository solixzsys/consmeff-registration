<div class="dashboard-layout">
    <app-sidebar></app-sidebar>
    <div class="main-wrapper">
      <app-topbar></app-topbar>
      
      <div class="dashboard-content">
        <!-- Welcome Section -->
        <div class="welcome-section">
          <div class="welcome-text">
            <h1>Welcome back, <span class="highlight">{{ name }}</span>!</h1>
            <p>Here's what's happening with your application today.</p>
          </div>
          <div class="welcome-actions">
            <p-button 
              label="Complete Application" 
              icon="pi pi-check-circle"
              (onClick)="showDialog()"
              [outlined]="true"
            ></p-button>
          </div>
        </div>
  
        <!-- Stats Cards -->
        <div class="stats-grid">
          <div class="stat-card">
            <div class="stat-icon primary">
              <i class="pi pi-file-edit"></i>
            </div>
            <div class="stat-content">
              <h3>Application Status</h3>
              <p class="stat-value">{{ applicationProgress }}% Complete</p>
              <p-progressBar [value]="applicationProgress" [showValue]="false"></p-progressBar>
            </div>
          </div>
  
          <div class="stat-card">
            <div class="stat-icon success">
              <i class="pi pi-check-circle"></i>
            </div>
            <div class="stat-content">
              <h3>Payment Status</h3>
              <p class="stat-value">{{ paymentStatus }}</p>
              <small>{{ paymentDate }}</small>
            </div>
          </div>
  
          <div class="stat-card">
            <div class="stat-icon warning">
              <i class="pi pi-calendar"></i>
            </div>
            <div class="stat-content">
              <h3>Submission Deadline</h3>
              <p class="stat-value">{{ daysRemaining }} days left</p>
              <small>{{ deadline }}</small>
            </div>
          </div>
  
          <div class="stat-card">
            <div class="stat-icon info">
              <i class="pi pi-book"></i>
            </div>
            <div class="stat-content">
              <h3>Documents</h3>
              <p class="stat-value">{{ documentsUploaded }}/{{ totalDocuments }}</p>
              <small>Documents uploaded</small>
            </div>
          </div>
        </div>
  
        <!-- Main Content Grid -->
        <div class="content-grid">
          <!-- Application Progress -->
          <div class="dashboard-card large">
            <div class="card-header">
              <h2>Application Progress</h2>
              <button pButton icon="pi pi-ellipsis-v" [text]="true" [rounded]="true"></button>
            </div>
            <div class="card-content">
              <div class="progress-chart">
                <p-chart type="doughnut" [data]="chartData" [options]="chartOptions" [plugins]="chartPlugins"></p-chart>
              </div>
              <div class="progress-details">
                <div class="progress-item">
                  <div class="progress-item-header">
                    <span>Personal Information</span>
                    <span class="status completed">✓</span>
                  </div>
                  <p-progressBar [value]="100" [showValue]="false"></p-progressBar>
                </div>
                <div class="progress-item">
                  <div class="progress-item-header">
                    <span>Programme Selection</span>
                    <span class="status pending">⏳</span>
                  </div>
                  <p-progressBar [value]="50" [showValue]="false"></p-progressBar>
                </div>
                <div class="progress-item">
                  <div class="progress-item-header">
                    <span>Document Upload</span>
                    <span class="status pending">⏳</span>
                  </div>
                  <p-progressBar [value]="0" [showValue]="false"></p-progressBar>
                </div>
              </div>
              <p-button 
                label="Continue Application" 
                icon="pi pi-arrow-right"
                iconPos="right"
                (onClick)="showDialog()"
                styleClass="w-full continue-btn"
              ></p-button>
            </div>
          </div>
  
          <!-- Quick Actions -->
          <div class="dashboard-card">
            <div class="card-header">
              <h2>Quick Actions</h2>
            </div>
            <div class="card-content">
              <div class="quick-actions">
                <button pButton label="Make Payment" icon="pi pi-credit-card" (onClick)="navigateTo('/pages/payment')" [outlined]="true" class="action-btn"></button>
                <button pButton label="Upload Documents" icon="pi pi-upload" (onClick)="navigateTo('/pages/documents')" [outlined]="true" class="action-btn"></button>
                <button pButton label="View Results" icon="pi pi-chart-bar" (onClick)="navigateTo('/pages/results')" [outlined]="true" class="action-btn"></button>
                <button pButton label="Contact Support" icon="pi pi-question-circle" (onClick)="navigateTo('/pages/support')" [outlined]="true" class="action-btn"></button>
              </div>
            </div>
          </div>
  
          <!-- Announcements -->
          <div class="dashboard-card">
            <div class="card-header">
              <h2>Announcements</h2>
              <p-badge value="3" severity="info"></p-badge>
            </div>
            <div class="card-content">
              <div class="announcements-list">
                <div class="announcement-item">
                  <div class="announcement-icon">
                    <i class="pi pi-megaphone"></i>
                  </div>
                  <div class="announcement-content">
                    <h4>Application Deadline Extended</h4>
                    <p>The deadline for 2024 admission has been extended to March 31st.</p>
                    <small>2 days ago</small>
                  </div>
                </div>
                <div class="announcement-item">
                  <div class="announcement-icon">
                    <i class="pi pi-info-circle"></i>
                  </div>
                  <div class="announcement-content">
                    <h4>Document Submission Guidelines</h4>
                    <p>Please ensure all documents are in PDF format.</p>
                    <small>5 days ago</small>
                  </div>
                </div>
                <div class="announcement-item">
                  <div class="announcement-icon">
                    <i class="pi pi-calendar"></i>
                  </div>
                  <div class="announcement-content">
                    <h4>Interview Schedule Released</h4>
                    <p>Check your email for interview dates and times.</p>
                    <small>1 week ago</small>
                  </div>
                </div>
              </div>
              <a href="#" class="view-all-link">View all announcements →</a>
            </div>
          </div>
  
          <!-- Recent Activities -->
          <div class="dashboard-card">
            <div class="card-header">
              <h2>Recent Activities</h2>
            </div>
            <div class="card-content">
              <p-timeline [value]="activities" align="left">
                <ng-template pTemplate="content" let-activity>
                  <div class="activity-item">
                    <h4>{{ activity.title }}</h4>
                    <p>{{ activity.description }}</p>
                    <small>{{ activity.date }}</small>
                  </div>
                </ng-template>
              </p-timeline>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  
  <!-- Programme Selection Dialog -->
  <p-dialog 
    [header]="dialogTitle" 
    [(visible)]="visible" 
    [modal]="true"
    [style]="{ width: '600px' }"
    styleClass="programme-dialog"
  >
    <!-- <app-programme 
      [backendProgramme]="backendProgramme" 
      (showGuidelineStatus)="showGuideline($event)" 
      (selectedDeptChanged)="courseUpdated($event)"
    ></app-programme> -->
  </p-dialog>
  
  <!-- Guidelines Dialog -->
  <p-dialog 
    header="Application Guidelines" 
    [(visible)]="guidelineVisible" 
    [modal]="true"
    [style]="{ width: '600px', maxHeight: '80vh' }"
    styleClass="guidelines-dialog"
  >
    <div class="guidelines-content">
      <p class="guidelines-intro">
        Please read the Application Guidelines carefully before proceeding. It is important to understand and follow these guidelines to avoid errors in your application.
      </p>
      
      <div class="guidelines-list">
        <h3>Admission Requirements</h3>
        <ol>
          <li>
            <strong>Academic Qualifications:</strong>
            <p>Candidates must possess SSCE or equivalent at credit level in five (5) subjects at not more than two (2) sittings:</p>
            <ul>
              <li>Physics</li>
              <li>Chemistry</li>
              <li>Biology</li>
              <li>English</li>
              <li>Mathematics</li>
            </ul>
          </li>
          <li>
            <strong>Required Documents:</strong>
            <ul>
              <li>Birth Certificate</li>
              <li>O' Level (SSCE) Certificates</li>
              <li>Certificate of Origin</li>
              <li>Passport Photograph</li>
            </ul>
          </li>
          <li>
            <strong>Application Fee:</strong>
            <p>₦15,000.00 (Non-refundable)</p>
          </li>
          <li>
            <strong>JAMB Requirements:</strong>
            <p>Minimum score of 150 with institution as first choice.</p>
          </li>
        </ol>
      </div>
  
      <div class="acceptance-check">
        <p-checkbox 
          [(ngModel)]="guidelinesAccepted" 
          [binary]="true" 
          inputId="guidelines"
        ></p-checkbox>
        <label for="guidelines">I have read and understand the guidelines</label>
      </div>
    </div>
  
    <ng-template pTemplate="footer">
      <p-button 
        label="Continue to Payment" 
        icon="pi pi-arrow-right"
        iconPos="right"
        [disabled]="!guidelinesAccepted"
        (onClick)="dismissGuideline()"
      ></p-button>
    </ng-template>
  </p-dialog>